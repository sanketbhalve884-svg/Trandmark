<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>TrendMart - Shop the Latest Trends</title>
<style>
  :root{
    --primary:#ff4c60;
    --dark:#222;
    --muted:#777;
    --card-bg:#fff;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter, system-ui, Arial, sans-serif;background:#f4f6f8;color:var(--dark)}
  header{background:var(--primary);color:#fff;padding:18px 16px;text-align:center}
  header h1{margin:0;font-size:1.6rem;letter-spacing:0.5px}
  .container{max-width:1100px;margin:24px auto;padding:0 16px}
  .grid{display:grid;gap:18px}
  .products{grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
  .card{background:var(--card-bg);border-radius:10px;box-shadow:0 6px 18px rgba(15,20,25,0.06);overflow:hidden}
  .card img{width:100%;height:180px;object-fit:cover;display:block}
  .card-body{padding:12px}
  .card h3{margin:6px 0 4px;font-size:1.05rem}
  .price{color:var(--primary);font-weight:700;margin-bottom:8px}
  .btn{display:inline-block;padding:8px 12px;border-radius:8px;background:var(--primary);color:#fff;text-decoration:none;font-weight:600;cursor:pointer;border:none}
  .muted{color:var(--muted)}
  .topbar{display:flex;gap:12px;justify-content:space-between;align-items:center;padding:12px 0}
  .search{flex:1;margin-right:12px}
  input.search-input{width:100%;padding:10px;border-radius:8px;border:1px solid #e0e6ea}
  .cart-btn{background:#fff;color:var(--primary);padding:8px 12px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);cursor:pointer}
  /* cart drawer */
  .cart-drawer{position:fixed;right:16px;top:72px;width:360px;max-width:94%;height:calc(100vh - 110px);background:#fff;box-shadow:0 30px 70px rgba(10,20,30,0.15);border-radius:12px;overflow:auto;transform:translateX(120%);transition:transform .28s ease;z-index:60;padding:16px}
  .cart-drawer.open{transform:translateX(0)}
  .cart-item{display:flex;gap:10px;padding:10px 0;border-bottom:1px solid #f0f0f0;align-items:center}
  .cart-item img{width:64px;height:64px;object-fit:cover;border-radius:8px}
  .qty{display:flex;gap:6px;align-items:center}
  .small{font-size:0.9rem;color:var(--muted)}
  .checkout{margin-top:12px;padding-top:12px}
  .checkout form{display:flex;flex-direction:column;gap:8px}
  input,textarea{padding:10px;border-radius:8px;border:1px solid #e0e6ea}
  .flex{display:flex;gap:8px}
  .total{font-weight:700;font-size:1.1rem}
  footer{margin-top:36px;padding:16px;text-align:center;color:var(--muted)}
  @media(max-width:560px){
    .cart-drawer{right:8px;left:8px;width:auto}
  }
</style>
</head>
<body>

<header>
  <h1>TrendMart</h1>
  <div style="font-size:0.95rem;margin-top:6px">Shop the Latest Trends — Simple ordering via WhatsApp & Email</div>
</header>

<div class="container">
  <div class="topbar">
    <div class="search">
      <input id="search" class="search-input" placeholder="Search products (example: jacket, watch)" />
    </div>
    <div>
      <button id="openCart" class="cart-btn">Cart (<span id="cartCount">0</span>)</button>
    </div>
  </div>

  <div class="grid products" id="productList">
    <!-- product cards injected here -->
  </div>

  <footer>
    <div class="muted">TrendMart • Built for quick orders • Replace contact number in code to receive orders on your WhatsApp</div>
    <div style="margin-top:8px">&copy; <span id="year"></span> TrendMart</div>
  </footer>
</div>

<!-- cart drawer -->
<div id="cartDrawer" class="cart-drawer" aria-hidden="true">
  <h3>Your Cart</h3>
  <div id="cartItems"></div>
  <div class="checkout">
    <div class="flex" style="justify-content:space-between;align-items:center">
      <div class="total">Total: $<span id="cartTotal">0.00</span></div>
      <button id="clearCart" class="btn" style="background:#ddd;color:var(--dark)">Clear</button>
    </div>

    <h4 style="margin-top:12px">Checkout</h4>
    <form id="checkoutForm">
      <input type="text" id="customerName" placeholder="Your name" required />
      <input type="tel" id="customerPhone" placeholder="Phone (with country code, e.g. +919876543210)" required />
      <input type="email" id="customerEmail" placeholder="Email (optional)" />
      <textarea id="customerAddr" rows="2" placeholder="Delivery address (city, street)"></textarea>

      <label class="small">How do you want to place order?</label>
      <div class="flex">
        <button id="placeWhatsapp" type="button" class="btn">Send via WhatsApp</button>
        <button id="placeEmail" type="button" class="btn" style="background:#333">Send via Email</button>
      </div>
      <small class="small">You will be redirected to WhatsApp / your email app with the pre-filled order. Then confirm send.</small>
    </form>
    <div style="margin-top:10px;font-size:0.9rem;color:var(--muted)">
      <strong>Note:</strong> This is a simple order flow (no payment). For online payments and inventory, we can add payment gateway later.
    </div>
  </div>
</div>

<script>
/* ===========================
   ====== CONFIG HERE ========
   Replace whatsappNumber with your real number (include country code, no +, e.g. 919876543210)
   Replace sellerEmail with the email where you want to receive orders.
   =========================== */
const whatsappNumber = "919876543210"; // <-- CHANGE to your number (no plus sign)
const sellerEmail = "trendmart@example.com"; // <-- CHANGE to your email

/* Example product data (change/add products as you like) */
const products = [
  { id: "p1", title: "Stylish Jacket", price: 49.99, img:"https://images.unsplash.com/photo-1586864387766-2bde174d450e?auto=format&fit=crop&w=800&q=80" },
  { id: "p2", title: "Elegant Watch", price: 79.99, img:"https://images.unsplash.com/photo-1524678606370-a47ad25cb82a?auto=format&fit=crop&w=800&q=80" },
  { id: "p3", title: "Modern Backpack", price: 39.99, img:"https://images.unsplash.com/photo-1556905055-8f358a7a47b2?auto=format&fit=crop&w=800&q=80" },
  { id: "p4", title: "Urban Sneakers", price: 59.99, img:"https://images.unsplash.com/photo-1519741496057-5c1b3dd7f3b5?auto=format&fit=crop&w=800&q=80" }
];

/* ====== App logic ====== */
const productList = document.getElementById('productList');
const cartDrawer = document.getElementById('cartDrawer');
const openCartBtn = document.getElementById('openCart');
const cartCount = document.getElementById('cartCount');
const cartItemsEl = document.getElementById('cartItems');
const cartTotalEl = document.getElementById('cartTotal');
const clearCartBtn = document.getElementById('clearCart');

let cart = JSON.parse(localStorage.getItem('trendmart_cart')||'[]');

function saveCart(){ localStorage.setItem('trendmart_cart', JSON.stringify(cart)); renderCart(); }

function renderProducts(list){
  productList.innerHTML = "";
  list.forEach(p=>{
    const card = document.createElement('div'); card.className='card';
    card.innerHTML = `
      <img src="${p.img}" alt="${p.title}">
      <div class="card-body">
        <h3>${p.title}</h3>
        <div class="price">$${p.price.toFixed(2)}</div>
        <button class="btn addBtn" data-id="${p.id}">Add to cart</button>
      </div>`;
    productList.appendChild(card);
  });
  // attach listeners
  document.querySelectorAll('.addBtn').forEach(b=>{
    b.addEventListener('click', e=>{
      const id = e.target.dataset.id;
      addToCart(id);
    });
  });
}

function addToCart(id){
  const existing = cart.find(c=>c.id===id);
  if(existing){ existing.qty += 1; }
  else{
    const prod = products.find(p=>p.id===id);
    cart.push({id:prod.id,title:prod.title,price:prod.price,qty:1,img:prod.img});
  }
  saveCart();
  showToast("Added to cart");
}

function renderCart(){
  cartCount.textContent = cart.reduce((s,i)=>s+i.qty,0);
  cartItemsEl.innerHTML = "";
  if(cart.length===0){ cartItemsEl.innerHTML = "<div class='small muted'>Your cart is empty.</div>"; cartTotalEl.textContent = '0.00'; return; }
  cart.forEach(item=>{
    const div = document.createElement('div'); div.className='cart-item';
    div.innerHTML = `
      <img src="${item.img}" alt="">
      <div style="flex:1">
        <div style="font-weight:600">${item.title}</div>
        <div class="small">$${item.price.toFixed(2)} each</div>
        <div style="margin-top:6px" class="qty">
          <button class="qtyBtn" data-op="dec" data-id="${item.id}">−</button>
          <div style="padding:4px 8px;border-radius:6px;border:1px solid #eee">${item.qty}</div>
          <button class="qtyBtn" data-op="inc" data-id="${item.id}">+</button>
          <button class="qtyBtn" data-op="remove" data-id="${item.id}" style="margin-left:8px;background:#ff4c60;color:#fff;padding:6px 8px;border-radius:6px;border:none">Remove</button>
        </div>
      </div>
    `;
    cartItemsEl.appendChild(div);
  });
  document.querySelectorAll('.qtyBtn').forEach(btn=>{
    btn.addEventListener('click', e=>{
      const id = e.target.dataset.id; const op = e.target.dataset.op;
      if(op==='inc'){ cart = cart.map(c=> c.id===id? {...c,qty:c.qty+1} : c); }
      else if(op==='dec'){ cart = cart.map(c=> c.id===id? {...c,qty: Math.max(1,c.qty-1)} : c); }
      else if(op==='remove'){ cart = cart.filter(c=>c.id!==id); }
      saveCart();
    });
  });
  const total = cart.reduce((s,i)=>s + i.price * i.qty, 0);
  cartTotalEl.textContent = total.toFixed(2);
}

openCartBtn.addEventListener('click', ()=>{
  cartDrawer.classList.toggle('open');
  cartDrawer.setAttribute('aria-hidden', cartDrawer.classList.contains('open') ? 'false' : 'true');
  renderCart();
});

clearCartBtn.addEventListener('click', ()=>{
  if(confirm("Clear the cart?")){ cart=[]; saveCart(); }
});

/* Checkout actions */
document.getElementById('placeWhatsapp').addEventListener('click', ()=>{
  if(cart.length===0){ alert("Cart is empty"); return; }
  const name = document.getElementById('customerName').value.trim();
  const phone = document.getElementById('customerPhone').value.trim();
  const addr = document.getElementById('customerAddr').value.trim();
  if(!name || !phone){ alert("Please enter name and phone"); return; }
  // build message
  let msg = `Order from TrendMart%0AName: ${encodeURIComponent(name)}%0APhone: ${encodeURIComponent(phone)}%0AAddress: ${encodeURIComponent(addr)}%0A%0AItems:%0A`;
  cart.forEach(it=>{
    msg += `${encodeURIComponent(it.title)} - ${it.qty} x $${it.price.toFixed(2)}%0A`;
  });
  const total = cart.reduce((s,i)=>s + i.price * i.qty, 0).toFixed(2);
  msg += `%0ATotal: $${total}%0A%0A(Place this order on TrendMart)`;
  // whatsapp link
  const wa = `https://wa.me/${whatsappNumber}?text=${msg}`;
  window.open(wa,'_blank');
  // optionally store last orders in localStorage for admin reference
  saveOrderRecord({method:'whatsapp',name,phone,addr,items:cart,total});
});

document.getElementById('placeEmail').addEventListener('click', ()=>{
  if(cart.length===0){ alert("Cart is empty"); return; }
  const name = document.getElementById('customerName').value.trim();
  const phone = document.getElementById('customerPhone').value.trim();
  const addr = document.getElementById('customerAddr').value.trim();
  if(!name || !phone){ alert("Please enter name and phone"); return; }
  let body = `Order from TrendMart\nName: ${name}\nPhone: ${phone}\nAddress: ${addr}\n\nItems:\n`;
  cart.forEach(it=> body += `${it.title} - ${it.qty} x $${it.price.toFixed(2)}\n`);
  const total = cart.reduce((s,i)=>s + i.price * i.qty, 0).toFixed(2);
  body += `\nTotal: $${total}\n\n(Place this order on TrendMart)`;
  const subject = encodeURIComponent("New TrendMart Order from " + name);
  const mailto = `mailto:${sellerEmail}?subject=${subject}&body=${encodeURIComponent(body)}`;
  window.location.href = mailto;
  saveOrderRecord({method:'email',name,phone,addr,items:cart,total});
});

/* Save order record locally for admin reference (optional) */
function saveOrderRecord(record){
  const hist = JSON.parse(localStorage.getItem('trendmart_orders')||'[]');
  record.time = new Date().toISOString();
  hist.unshift(record);
  localStorage.setItem('trendmart_orders', JSON.stringify(hist));
  // optionally clear cart after placing order:
  cart = []; saveCart();
  alert("Order prepared. Please send the WhatsApp message / Email to confirm order.");
}

/* search */
document.getElementById('search').addEventListener('input', (e)=>{
  const q = e.target.value.trim().toLowerCase();
  if(!q) return renderProducts(products);
  renderProducts(products.filter(p=> p.title.toLowerCase().includes(q)));
});

/* initial render */
document.getElementById('year').textContent = new Date().getFullYear();
renderProducts(products);
renderCart();
</script>

</body>
</html>
